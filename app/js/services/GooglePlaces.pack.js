"use strict";pizzaApp.factory("googlePlaces",function(e,t,n){var r,i,s,o;i=49.2827;s=-123.1207;o=250;r="AIzaSyBfobtJ4mzfR7RDoVsKgVmVjLlqXEWya8c";var u=function(e){var n,i,s,u,a,f,l;n=e.lat;i=e.lng;s=e.radius||o;u=e.type||"food";a="pizza";f="distance";l="https://maps.googleapis.com/maps/api/place/nearbysearch/json";return t.get(l+"?location="+n+","+i+"&radius="+s+"&types="+u+"&name="+a+"&key="+r).then(function(e){return e.data})},a=function(e){var n,i;n=e.place_id;i="https://maps.googleapis.com/maps/api/place/details/json";return t.get(i+"?placeid="+n+"&key="+r).then(function(e){return e.data})},f=function(e,t){var n=d(e),r=v(e),i=p(t);return e.name+" <br> "+n+" / "+r+" <br> "+i+"<br> "+e.vicinity},l=function(e){return e.id},c=function(e){return e.vicinity},h=function(e){return e.vicinity},p=function(e){return e?e.result.formatted_phone_number:"n/a"},d=function(e){return e.hasOwnProperty("opening_hours")?e.opening_hours.open_now?"open now":"closed now":"hours not listed"},v=function(e){return y.call(e.types,"meal_delivery")?"delivers":"no delivery"},m=function(e){var t,n=d(e),r={delivers:"map_icon_delivers_open.png","no delivery":"map_icon_no_delivery_open.png","hours not listed":"map_icon_hours_not_listed.png",closed:"map_icon_closed.png","current location":"map_icon_current_location.png"};n==="open now"?t=r[v(e)]:n==="hours not listed"?t=r[n]:t=r.closed;return t},g=function(e,t){function n(e,t,n){t.setPosition(n);t.setContent(e?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.")}navigator.geolocation?navigator.geolocation.getCurrentPosition(function(n){var r={lat:n.coords.latitude,lng:n.coords.longitude};if(e.returnLatLng===!0){t(r);return}geocodePosition(r,function(e){t(e)})},function(){n(!0,infowindow,map.getCenter())}):n(!1,infowindow,map.getCenter())},y=function(e){var t=e!==e,n;!t&&typeof Array.prototype.indexOf=="function"?n=Array.prototype.indexOf:n=function(e){var n=-1,r=-1;for(n=0;n<this.length;n++){var i=this[n];if(t&&i!==i||i===e){r=n;break}}return r};return n.call(this,e)>-1};return{getStores:u,getStoreDetails:a,getContentString:f,getId:l,getName:c,getAddress:h,getTelephone:p,getOpen:d,getDelivery:v,getMarkerName:m,getUserLocation:g}});