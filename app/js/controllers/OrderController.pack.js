"use strict";pizzaApp.controller("OrderController",function(t,n,r,i,s){function u(){t.savedMessage=!0;o=s(function(){t.savedMessage=!1},2e3)}t.order=n.order;t.savedMessage=!1;t.reviewFields=!1;var o;t.reset=function(){n.reset()};t.allOrders=function(){n.getAllOrders().$promise.then(function(e){i.debug("success",e)}).catch(function(e){i.error("failure",e)})};t.reviewOrder=function(e,n){t.reviewFields=!0};t.editOrder=function(e,n){t.reviewFields=!1};t.saveOrder=function(e,t){n.getNextId(function(r){e.id=r[0];i.debug("order.id: "+e.id);t.$valid&&n.save(e).$promise.then(function(e){i.debug("success",e);u()}).catch(function(e){i.error("failure",e)})})};t.updateOrder=function(e,t){i.debug("items : "+e.items+"vendor : "+e.vendor+"newOrderForm : "+t);var r;i.debug("order.id: "+e.id);t.$valid&&n.save(e).$promise.then(function(e){i.debug("success",e);u()}).catch(function(e){i.error("failure",e)})};t.addItem=function(e){n.addItem(e)};t.removeItem=function(e,t,r){n.removeItem(e,t)};t.getVendorList=function(){var e=r.getUserLocation({returnLatLng:!0},function(e){var n=r.getStores({lat:e.lat,lng:e.lng,radius:500}).then(function(e){var n=[];for(var i in e.results){var s=e.results[i],o=r.getContentString(s),u=r.getId(s),a=r.getName(s),f=r.getOpen(s),l=r.getDelivery(s),c=r.getAddress(s);n.push({id:u,value:o.replace(/<br>/g," ")})}console.log("CTL - dropdownList: "+n);t.vendorList=n})})};t.getVendorList()});